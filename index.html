<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>English Matrix Learning</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: linear-gradient(to bottom, #ffefba, #ffffff);
        font-family: monospace;
    }
    canvas {
        display: block;
        position: absolute;
        top: 0;
        left: 0;
    }
    .btn {
        position: absolute;
        padding: 8px 16px;
        font-size: 14px;
        background-color: rgba(255, 255, 0, 0.7);
        border: none;
        color: black;
        cursor: pointer;
        border-radius: 5px;
    }
    .btn:hover { background-color: rgba(255, 255, 0, 1); }

    /* Tugmalar joylashuvi */
    #popupBtn { top: 20px; left: 20px; }
    #startLesson { top: 20px; right: 20px; }
    #startPresent { top: 70px; right: 20px; }
    #speedUp { bottom: 20px; left: 20px; }
    #speedDown { bottom: 20px; right: 20px; }
    #pause { top: 50%; left: 20px; transform: translateY(-50%); }
    #resume { top: 50%; right: 20px; transform: translateY(-50%); }
    #clear { bottom: 50px; left: 50%; transform: translateX(-50%); }
    #yellow { bottom: 90px; left: 50%; transform: translateX(-50%); }
    #white { bottom: 130px; left: 50%; transform: translateX(-50%); }

    /* Oyna */
    .lessonBox {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 400px;
        max-width: 90%;
        background-color: rgba(0,0,0,0.9);
        color: #fff;
        padding: 20px;
        border-radius: 10px;
        display: none;
        z-index: 20;
        text-align: left;
        line-height: 1.5;
    }
    .lessonBox h2 { color: #FFD700; margin-top: 0; }
    .closeLesson {
        position: absolute;
        top: 10px;
        right: 15px;
        background: red;
        color: white;
        border: none;
        padding: 5px 10px;
        cursor: pointer;
        border-radius: 3px;
    }
</style>
</head>
<body>
<canvas id="matrix"></canvas>

<!-- Tugmalar -->
<button class="btn" id="popupBtn">Popup</button>
<button class="btn" id="startLesson">Past Simple</button>
<button class="btn" id="startPresent">Present Simple + To Be</button>
<button class="btn" id="speedUp">Speed +</button>
<button class="btn" id="speedDown">Speed -</button>
<button class="btn" id="pause">Pause</button>
<button class="btn" id="resume">Resume</button>
<button class="btn" id="clear">Clear</button>
<button class="btn" id="yellow">Yellow Words</button>
<button class="btn" id="white">White Words</button>

<!-- Past Simple oyna -->
<div id="lessonBoxPast" class="lessonBox">
    <button class="closeLesson">X</button>
    <h2>Past Simple</h2>
    <p><strong>Qoidalar:</strong></p>
    <ul>
        <li>Regular verbs: add <code>-ed</code> (play → played)</li>
        <li>Irregular verbs: go → went, see → saw, eat → ate</li>
    </ul>
    <p><strong>Misollar:</strong></p>
    <ul>
        <li>I played football yesterday.</li>
        <li>She went to the store.</li>
        <li>We saw a movie last night.</li>
        <li>He ate pizza for lunch.</li>
    </ul>
</div>

<!-- Present Simple + To Be oyna -->
<div id="lessonBoxPresent" class="lessonBox">
    <button class="closeLesson">X</button>
    <h2>Present Simple + To Be</h2>
    <p><strong>Qoidalar:</strong></p>
    <ul>
        <li>To be: am/is/are</li>
        <li>Positive: I am, You are, He/She/It is</li>
        <li>Negative: I am not, You are not, He/She/It is not</li>
        <li>Questions: Am I? Are you? Is he/she/it?</li>
    </ul>
    <p><strong>Misollar:</strong></p>
    <ul>
        <li>I am happy.</li>
        <li>She is a teacher.</li>
        <li>We are friends.</li>
        <li>You are not late.</li>
    </ul>
</div>

<script>
// Canvas
const canvas = document.getElementById("matrix");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// So‘zlar
const words = ["went","saw","ate","played","ran","bought","read","wrote","slept","drank","made","took","came","did","had","found"];
let fontSize = 18;
let columns = Math.floor(canvas.width / fontSize);
const drops = [];
for (let x = 0; x < columns; x++) { drops[x] = Math.random() * canvas.height; }

let speed = 50;
let color = "#FFF";
let interval;

function draw() {
    ctx.fillStyle = "rgba(255, 255, 255, 0.1)";
    ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle = color;
    ctx.font = fontSize + "px monospace";
    for(let i=0;i<drops.length;i++){
        const text = words[Math.floor(Math.random()*words.length)];
        ctx.fillText(text, i*fontSize, drops[i]*fontSize);
        if(drops[i]*fontSize>canvas.height && Math.random()>0.975){ drops[i]=0; }
        drops[i]++;
    }
}
function startMatrix(){ if(!interval) interval=setInterval(draw,speed); }
function stopMatrix(){ clearInterval(interval); interval=null; }
startMatrix();

// Popup
document.getElementById("popupBtn").addEventListener("click", ()=>{ alert("Salom! Siz tugmani bosdingiz!"); });

// Past Simple
const lessonBoxPast = document.getElementById("lessonBoxPast");
const lessonBoxPresent = document.getElementById("lessonBoxPresent");
document.getElementById("startLesson").addEventListener("click", ()=>{ lessonBoxPast.style.display="block"; });
document.querySelectorAll("#lessonBoxPast .closeLesson")[0].addEventListener("click", ()=>{ lessonBoxPast.style.display="none"; });

// Present Simple
document.getElementById("startPresent").addEventListener("click", ()=>{ lessonBoxPresent.style.display="block"; });
document.querySelectorAll("#lessonBoxPresent .closeLesson")[0].addEventListener("click", ()=>{ lessonBoxPresent.style.display="none"; });

// Tezlik
document.getElementById("speedUp").addEventListener("click", ()=>{ if(speed>10)speed-=10; stopMatrix(); startMatrix(); });
document.getElementById("speedDown").addEventListener("click", ()=>{ speed+=10; stopMatrix(); startMatrix(); });

// Rang
document.getElementById("yellow").addEventListener("click", ()=>{ color="#FFD700"; });
document.getElementById("white").addEventListener("click", ()=>{ color="#FFF"; });

// Pause / Resume
document.getElementById("pause").addEventListener("click", stopMatrix);
document.getElementById("resume").addEventListener("click", startMatrix);

// Clear
document.getElementById("clear").addEventListener("click", ()=>{ ctx.fillStyle="#FFFFFF"; ctx.fillRect(0,0,canvas.width,canvas.height); });

// Resize
window.addEventListener("resize", ()=>{
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    columns = Math.floor(canvas.width / fontSize);
    for(let x=0;x<columns;x++){ if(!drops[x]) drops[x]=Math.random()*canvas.height; }
});
</script>
</body>
</html>
